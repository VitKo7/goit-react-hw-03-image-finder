(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),s=n(8),c=n.n(s),r=n(7),i=n(9),l=n(3),u=n(4),g=n(6),d=n(5),h=n(0),j=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={search:""},e.handleInput=function(t){var n=t.target,a=n.name,o=n.value;e.setState(Object(i.a)({},a,o))},e.handleSubmit=function(t){t.preventDefault(),e.props.onSubmit(e.state)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state.search;return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",{className:"SearchForm-input",name:"search",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.handleInput,value:e})]})})}}]),n}(a.Component),b=n(11),m=n.n(b);m.a.defaults.baseURL="https://pixabay.com/api";var p="20181043-63559380747ebc8efe1373c68",f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"universe",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1";return m.a.get("/?q=".concat(e,"&page=").concat(t,"&key=").concat(p,"&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data}))},v=function(e){var t=e.picture,n=e.bigImage;return Object(h.jsx)("li",{className:"ImageGalleryItem",children:Object(h.jsx)("img",{src:t.webformatURL,alt:t.tags,className:"ImageGalleryItem-image","data-largeimg":t.largeImageURL,"data-tag":t.tags,onClick:n})})},O=function(e){var t=e.pictures,n=e.bigImage;return Object(h.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(h.jsx)(v,{picture:e,bigImage:n},e.id)}))})},x=function(e){var t=e.onClick;return Object(h.jsx)("div",{className:"btn-center",children:Object(h.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more..."})})},y=(n(43),function(){return Object(h.jsx)("div",{className:"spinner-center",children:Object(h.jsxs)("div",{className:"lds-spinner",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})})}),w=document.querySelector("#modal-root"),S=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).handleKeyDown=function(t){"Escape"===t.code&&e.props.showModal()},e.handleClick=function(t){t.currentTarget===t.target&&e.props.showModal()},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(s.createPortal)(Object(h.jsx)("div",{className:"Overlay",onClick:this.handleClick,children:Object(h.jsx)("div",{className:"Modal",children:this.props.children})}),w)}}]),n}(a.Component),k=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={pictures:[],search:"",page:1,isLoading:!1,showModal:!1,largeImage:"",imgTags:""},e.toggleModal=function(){e.setState((function(e){return{showModal:!e.showModal}}))},e.bigImage=function(t){var n=t.target.dataset,a=n.largeimg,o=n.tag;e.setState({largeImage:a,imgTags:o}),e.toggleModal()},e.handleInput=function(t){var n=t.target,a=n.name,o=n.value;e.setState(Object(i.a)({},a,o))},e.onSubmit=function(t){var n=t.search;e.setState({isLoading:!0}),n.length?(e.setState({search:n}),f(n).then((function(t){e.setState({pictures:Object(r.a)(t.hits),page:2,isLoading:!1})})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)})).finally((function(){return e.setState({isLoading:!1})}))):alert("Please, fill in the search form")},e.showMore=function(){e.setState({isLoading:!0}),f(e.state.search,e.state.page).then((function(t){e.setState((function(e){return{pictures:[].concat(Object(r.a)(e.pictures),Object(r.a)(t.hits)),page:e.page+1}}))})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)})).finally((function(){return e.setState({isLoading:!1})}))},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;f().then((function(t){e.setState({pictures:Object(r.a)(t.hits)})})).catch((function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config)}))}},{key:"componentDidUpdate",value:function(e,t){t.page!==this.state.page&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"render",value:function(){var e=this.state,t=e.pictures,n=e.isLoading,a=e.showModal,o=e.largeImage,s=e.imgTags;return Object(h.jsxs)("div",{children:[Object(h.jsx)(j,{onSubmit:this.onSubmit}),Object(h.jsx)(O,{pictures:t,bigImage:this.bigImage}),n?Object(h.jsx)(y,{}):1!==this.state.page&&Object(h.jsx)(x,{onClick:this.showMore}),a&&Object(h.jsx)(S,{showModal:this.toggleModal,children:Object(h.jsx)("img",{src:o,alt:s})})]})}}]),n}(a.Component);n(44),n(45);c.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.a210f3e0.chunk.js.map